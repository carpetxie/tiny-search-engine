#!/bin/bash
# testing.sh - test script for querier
# Author: William Bowles and Jeffrey Xie
# Date: 2025.11.22

# Test with invalid arguments
echo "=== Test with invalid number of arguments ==="
=== Test with invalid number of arguments ===
./querier
Invalid parameters.
./querier one
Invalid parameters.
./querier one two three
Invalid parameters.

# Test with invalid pageDirectory
echo ""

echo "=== Test with invalid pageDirectory ==="
=== Test with invalid pageDirectory ===
./querier /nonexistent /cs50/shared/tse/output/toscrape-index-1
pageDirectory formatted incorrectly.

# Test with invalid indexFilename
echo ""

echo "=== Test with invalid indexFilename ==="
=== Test with invalid indexFilename ===
./querier /cs50/shared/tse/output/toscrape-1 /nonexistent
pageDirectory formatted incorrectly.

# Test with valid inputs - simple queries
echo ""

echo "=== Test with valid inputs - simple queries ==="
=== Test with valid inputs - simple queries ===
echo "home" | ./querier /cs50/shared/tse/output/toscrape-1 /cs50/shared/tse/output/toscrape-index-1
pageDirectory formatted incorrectly.

# Test with AND operator
echo ""

echo "=== Test with AND operator ==="
=== Test with AND operator ===
echo "search and engine" | ./querier /cs50/shared/tse/output/toscrape-1 /cs50/shared/tse/output/toscrape-index-1
pageDirectory formatted incorrectly.

# Test with OR operator
echo ""

echo "=== Test with OR operator ==="
=== Test with OR operator ===
echo "home or search" | ./querier /cs50/shared/tse/output/toscrape-1 /cs50/shared/tse/output/toscrape-index-1
pageDirectory formatted incorrectly.

# Test with AND precedence over OR
echo ""

echo "=== Test with AND precedence over OR ==="
=== Test with AND precedence over OR ===
echo "computer science or programming language" | ./querier /cs50/shared/tse/output/toscrape-1 /cs50/shared/tse/output/toscrape-index-1
pageDirectory formatted incorrectly.

# Test error cases - bad characters
echo ""

echo "=== Test error: bad character ==="
=== Test error: bad character ===
echo "hello!" | ./querier /cs50/shared/tse/output/toscrape-1 /cs50/shared/tse/output/toscrape-index-1
pageDirectory formatted incorrectly.

# Test error cases - and/or at start
echo ""

echo "=== Test error: and at start ==="
=== Test error: and at start ===
echo "and hello" | ./querier /cs50/shared/tse/output/toscrape-1 /cs50/shared/tse/output/toscrape-index-1
pageDirectory formatted incorrectly.

# Test error cases - and/or at end
echo ""

echo "=== Test error: or at end ==="
=== Test error: or at end ===
echo "hello or" | ./querier /cs50/shared/tse/output/toscrape-1 /cs50/shared/tse/output/toscrape-index-1
pageDirectory formatted incorrectly.

# Test error cases - adjacent operators
echo ""

echo "=== Test error: adjacent operators ==="
=== Test error: adjacent operators ===
echo "hello and or world" | ./querier /cs50/shared/tse/output/toscrape-1 /cs50/shared/tse/output/toscrape-index-1
pageDirectory formatted incorrectly.

# Test with empty query
echo ""

echo "=== Test with empty query ==="
=== Test with empty query ===
echo "" | ./querier /cs50/shared/tse/output/toscrape-1 /cs50/shared/tse/output/toscrape-index-1
pageDirectory formatted incorrectly.

echo ""

echo "=== Testing complete ==="
=== Testing complete ===

